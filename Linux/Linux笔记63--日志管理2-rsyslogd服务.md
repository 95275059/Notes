# Linux笔记63--日志管理2-rsyslogd服务

1. 日志文件格式
   + 基本日志格式包含以下四列：
     + 事件产生时间
     + 发生事件的服务器的主机名
     + 发生事件的服务名或程序名
     + 事件的具体信息

2. /etc/rsyslog.conf配置文件：指定rsyslog服务记录哪些日志

   #kern.*                                                 /dev/console

   #服务名称[连接符号]日志等级           日志记录位置

   #内核信息.所有日志等级                     记录在/dev/console中

3. 服务名称

   | 服务名称      | 说明                                                         |
   | ------------- | ------------------------------------------------------------ |
   | auth          | 安全和认证相关消息（不推荐使用authpriv替代）                 |
   | authpriv      | 安全和认证相关消息（私有的）                                 |
   | cron          | 系统定时任务cront和at产生的日志                              |
   | daemon        | 和各个守护进程相关的日志                                     |
   | ftp           | ftp守护进程产生的日志                                        |
   | kern          | 内核产生的日志（不是用户进程产生的）                         |
   | local0-local7 | 为本地使用预留的服务                                         |
   | lpr           | 打印产生的日志                                               |
   | mail          | 邮件收发信息                                                 |
   | news          | 与新闻服务器相关的日志                                       |
   | syslog        | 由syslogd服务产生的日志信息（虽然服务名已经改为rsyslogd，但是很多配置都还是沿用了syslogd的，这里并没有修改服务名） |
   | user          | 用户等级类别的日志信息                                       |
   | uucp          | uucp子系统的日志信息，uucp是早期linux系统进行数据传递的协议，后来也常用在新闻组服务中 |

4. 连接符号

   + “*”：代表所有日志等级，即所有的日志等级都记录

     例：authpriv.*   代表authpriv认证信息服务产生的日志，所有的日志等级都记录

   + “.”：代表只要比后面的等级高的（包括该等级）日志都记录下来。

     例：cron.info   代表cron服务产生的日志，只要日志等级大于等于info级别，就记录

   + “.=”：代表只记录所需等级的日志。

     例：*.=emerg   代表人和日志服务产生的日志，只要等级是emerg等级就记录

   + ".!"：代表不等于，即除了该等级的日志外，其他等级的日志都记录

5. 日志等级

   | 等级名称 | 说明                                                         |
   | -------- | ------------------------------------------------------------ |
   | debug    | 一般的调试信息说明                                           |
   | info     | 基本的通知信息                                               |
   | notice   | 普通信息，但有一定的重要性                                   |
   | warning  | 警告信息，但还不会影响到服务或系统的运行                     |
   | err      | 错误信息，一般达到err等级的信息已经可以影响到服务或系统的运行了 |
   | crit     | 临界状况信息，比err等级还严重                                |
   | alert    | 警告状态信息，比crit还严重。必须立即采取行动                 |
   | emerg    | 疼痛等级信息，系统已经无法使用                               |

6. 日志记录位置
   + 日志文件的绝对路径   如“/var/log/secure”
   + 系统设备文件   如"/dev/lp0"
   + 转发给远程主机   如"@192.168.1.150:514"
   + 用户名   如"root"         用户需要在线，否则收不到            *代表发送给在线的任何人
   + 忽略或丢弃日志   如"~"