# BlockchainPaper2--A Distributed Authentication Protocol Using Identity-Based Encryption and Blockchain for LEO Netwrok

1. 随记

   + 和传统的卫星网络相比，LEO  网络具有延时低和路径损耗低的特点
   + 以一系列带有证书的协议为代表的传统的认证方案在卫星场景下不再适用
   + 与传统的卫星网络不通，LEO卫星网络具有动态拓扑和链路切换频繁的特点
   + 在保证安全的前提下，运行在LEO卫星网络上的认证协议必须尽可能的轻便和高效率

2. IBE

   + 用户公钥
     + 可以直接由其独一无二的身份字符串得到
       + 可以是电话号码，邮件等
     + 创建公钥和身份之间的映射
     + 消除了证书带来的开销
   + 私钥
     + 使用受信任的第三方KGC(Key Generation Center)
     + KGC为系统中的不同角色提供公钥、秘钥和用户权限令牌的生成服务
     + 密钥生成过程
       + 用户注册时，想KGC提供其身份
       + KGC使用自己的私钥和相关的系统参数来计算该用户的公钥和私钥对，然后安全的传送给用户
     + 在传送机密信息时，不需要依靠证书，只需要使用接收者的公钥来加密信息，然后传送
   + IBE避免了传统的认证机制的开销

   ---

3. 区块链

   + 核心优势
     + 可靠的去中心化信任
       + 共识机制在区块链中的有效性，而不需要节点之间受信任的第三方
     + 保证数据的完整性而不会被篡改或伪造
       + 网络中的每个节点存储完整的数据备份

   ---

4. 论文主要工作

   + 分析LEO卫星网络的特点，提出并模拟了基于基于身份的加密（IBE）和区块链机制的**分布式区域访问认证协议**

   ---

5. 分布式认证协议

   + 访问认证
     + 用户和卫星通过公钥和私钥对实现互相认证
     + 使用令牌检查用户权限
   + 切换认证
     + 依靠信任链实现快速切换
       + 信任链：KGC,卫星，用户
     + 相关的认证日志以块的形式记录，这些块将在卫星和KGC之间合并和分发。

   ---

6. 系统逻辑结构

   + 每个轨道选出一个卫星作为逻辑根，负责区块链和KGC的互相作用

   ---

7. 协议的各个阶段

   + 注册阶段
     + 如果用户已经注册，则可以在其令牌有效期的任意时间直接接入卫星系统
     + 否则，需要向KGC提供合法的用户身份以获得公钥和私钥对，以及由KGC签名的令牌
     + 生成流程
       + 用户提供合法身份
       + KGC使用哈希函数和KGC公钥计算用户公钥
       + KGC使用其私钥计算用户私钥
       + 卫星在发射前会使用相同方式进行注册
       + KGC构造用户的令牌并用KGC的私钥进行签名
         + 令牌的构造
           + 用户身份
           + 用户权限
           + 权限开始时间
           + 权限结束时间
           + KGC的签名
             + 令牌中前四个字段的签名
       + KGC将生成的公钥，私钥和对应的令牌安全的发送给用户
       + KGC将用户注册日志打包到本地区块链的块中
     
     ---
     
   + 访问认证阶段
     + 用户在尝试接入卫星时，首先需要检查卫星的身份，然后使用哈希函数和KGC公钥计算卫星公钥。最后，用户将其身份发送到卫星
     + 卫星接收到信息后，检查用户身份并且检查最近的取消操作来检查用户的有效性；然后卫星计算用户公钥，生成随机数r和会话秘钥k（对称加密）；然后使用用户公钥对包含随机数r、会话秘钥、时间戳、和用卫星私钥对上述信息生成的数字签名的信息打包然后加密生成m1，然后发送给用户
     + 用户收到信息后，使用用户私钥进行解密，认证随机数r和会话秘钥的签名并保存；之后用户使用会话秘钥对包含随机数、令牌权限，要申请的服务和用户相关信息（UserInfo）（位置，时间，认证开始时的用户身份）的信息打包进行加密生成m2，然后发送给卫星。
     + 卫星收到信息后，使用会话秘钥进行解密，验证随机数r的正确性并且寻找最近的取消操作以验证当前用户的有效性；如果用户是有效的，那么卫星使用KGC公钥验证用户令牌权限的数字签名；接着，卫星检查令牌权限中的用户身份是否和一开始提供的身份一致；然后，卫星根据令牌中的权限和到期时间提供服务；最后，卫星使用会话秘钥对包含服务结果和时间戳的信息进行打包然后加密生成m3，然后发送给用户。
     + 如果上述所有步骤均正确无误，则卫星会正式分配相关资源以与用户建立安全连接，此外，卫星会将主要包含UserInfo的用户登录日志打包到块中，然后将其存储到卫星的本地区块链中。否则，卫星与用户断开连接。
     + 一旦用户收到来自卫星的消息，便用会话秘钥对其进行解密。当成功获得响应后，用户便通过自己和卫星之间的安全通道获得服务。
     + 综合分析，访问认证阶段的实质是通过IBE完成相互认证。用户不需要预先存储每个卫星的公钥。相反，只要通过广播卫星的网络标识，用户就能直接获得相应的公钥。然后，使用IBE确保身份验证的安全性。身份验证期间，将协商会话密钥，并在身份验证成功后建立安全通道。
     
     ---
     
   + 快速访问身份验证阶段

     + 当新用户一旦认证成功，他的相关信息会被存储在卫星中；由于区块链数据的可追溯性，当该用户再次访问卫星以获取服务时，直接

   + 切换认证阶段