# Blockchain2--哈希

1. Hash算法（散列算法）

   + Hash，把**任意长度的输入**（又叫做预映射pre-image）通过散列算法变换成**固定长度的输出**，该输出就是散列值。

   + 这种转换是一种**压缩映射**，即散列值的空间通常远小于输入的空间

   + 不同的输入可能会散列成相同的输出，所以**不可能从散列值来确定唯一的输入值**，即**很难找到逆向规律**

   + 特点

     + 确定性，效率高

       输入确定以后，结果也是确定的

       计算效率高

     + 不可逆

       不能从输出倒推出输入的值

     + 结果不可预测

       输入变一点点，结果会产生大的变化，而且没有规律可循

   ---

2. Hash在区块链中的应用

   + 数据加密

     + 交易数据通过哈希运算进行加密，并把相应的哈希值写入区块头

     + 区块

       + 区块头（80字节）
         + Version：版本号
         + Previous Block：前驱节点hash值
         + Next Block(s)：后续节点hash值
         + Number Of Transactions：交易数
         + Timestamp：时间戳
         + Nonce：随机数
         + Merkle Root：Merkle根的hash值

       + 记录列表（Transactions）
         + Transaction1(t1)
         + Transaction2(t2)
         + Transaction3(t3)
         + ...

     + hash值的作用

       + 识别区块数据是否被篡改
         + 区块链的hash值能够唯一而精准地识别一个区块
         + 区块链中任意节点通过简单的哈希计算都可以获得这个区块的哈希值
         + 计算出的哈希值没有变化也就意味着区块链中的信息没有被篡改
       + 把各个区块串联成区块链
         + 每个区块都包含上一个区块的哈希值和下一个区块的值，形成一个链式结构的区块链

   + 加密交易地址及哈希

     + Merkle Root

       将一个区块中的眉笔交易的哈希值得出后，再两两计算哈希值......直到得到最顶层的根哈希值

     + 作用
       + 快速定位每笔交易
       + 核实交易数据是否被篡改
         + 任何一笔交易的任何一个数字有变化，都会导致Merkle Root值的变化
         + 同时，如果有错误发生的情况，也可以快速定位错误的地方

   + 挖矿

     + Nonce随机数

       寻找Nonce这个随机数的过程就叫做挖矿

     + 网络上任何一台机器只要找到一个合适的数字天道自己的这个区块的Nonce位置，使得区块头数据的哈希值以18个以上的0开头，就挖到了矿

     + 由于没有办法实现写好一个满足18个0开头的数字然后反推Nonce，唯一的做法就是从0开始一个一个的尝试，看结果是否满足要求，直到找到

     + 挖矿的意义

       + 公平的找到计算能力最强的计算机

         工作量证明

       + 动态调整难度
         + 比特币为了保证10分钟出一个区块，就会每2016个块（2周）的时间计算一下找到这个nonce数字的难度
         + 如果这2016个块平均时间低于10分钟，则调高难度
         + 如果高于10分钟，则调低难度

   ---

3. 哈希运算

   ![Blockchain2-1](E:\Notes\Blockchain\Blockchain2-1.webp)

   + 比特币系统中，哈希运算基本都是使用SHA256算法

   + 莱特币是使用SCRYPT算法

   + 克币（Quark）达世币（DASH）是把很多算法一层层串联上使用

   + ...

     

   

   

   

   

