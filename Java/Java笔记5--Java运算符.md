# obJava笔记5--Java运算符

## 算数运算符

假设A=10 AND B=20

| 操作符 | 描述                              | 例子               |
| :----- | :-------------------------------- | :----------------- |
| +      | 加法 - 相加运算符两侧的值         | A + B等于30        |
| -      | 减法 - 左操作数减去右操作数       | A – B等于-10       |
| *      | 乘法 - 相乘操作符两侧的值         | A * B等于200       |
| /      | 除法 - 左操作数除以右操作数       | B / A等于2         |
| ％     | 取模 - 左操作数除以右操作数的余数 | B%A等于0           |
| ++     | 自增 - 操作数的值增加1            | B++ 或 ++B 等于 21 |
| --     | 自减 - 操作数的值减少1            | B-- 或 --B 等于 19 |

## 关系运算符

假设A=10 AND B=20

| 运算符 | 描述                                                         | 例子                   |
| :----- | :----------------------------------------------------------- | :--------------------- |
| ==     | 检查如果两个操作数的值是否相等，如果相等则条件为真。         | （A == B）为假(非真)。 |
| !=     | 检查如果两个操作数的值是否相等，如果值不相等则条件为真。     | (A != B) 为真。        |
| >      | 检查左操作数的值是否大于右操作数的值，如果是那么条件为真。   | （A> B）非真。         |
| <      | 检查左操作数的值是否小于右操作数的值，如果是那么条件为真。   | （A <B）为真。         |
| > =    | 检查左操作数的值是否大于或等于右操作数的值，如果是那么条件为真。 | （A> = B）为假。       |
| <=     | 检查左操作数的值是否小于或等于右操作数的值，如果是那么条件为真。 | （A <= B）为真。       |

## 位运算符

Java定义了位运算符，应用于整数类型(int)，长整型(long)，短整型(short)，字符型(char)，和字节型(byte)等类型。

位运算符作用在所有的位上，并且按位运算。（二进制）

假设a = 60，和b = 13

即a(2) = 0011 1100   ,   b(2) = 0000 1101

| 操作符 | 描述                                                         | 例子                           |
| :----- | :----------------------------------------------------------- | :----------------------------- |
| ＆     | 按位与操作符，当且仅当两个操作数的某一位都非0时候结果的该位才为1。 | （A＆B），得到12，即0000 1100  |
| \|     | 按位或操作符，只要两个操作数的某一位有一个非0时候结果的该位就为1。 | （A \| B）得到61，即 0011 1101 |
| ^      | 按位异或操作符，两个操作数的某一位不相同时候结果的该位就为1。 | （A ^ B）得到49，即 0011 0001  |
| 〜     | 按位补运算符翻转操作数的每一位。                             | （〜A）得到-61，即1100 0011    |
| <<     | 按位左移运算符。左操作数按位左移右操作数指定的位数。         | A << 2得到240，即 1111 0000    |
| >>     | 按位右移运算符。左操作数按位右移右操作数指定的位数。         | A >> 2得到15即 1111            |
| >>>    | 按位右移补零操作符。左操作数的值按右操作数指定的位数右移，移动得到的空位以零填充。 | A>>>2得到15即0000 1111         |

## 逻辑运算符

假设布尔变量A为真，变量B为假

| 操作符 | 描述                                                         | 例子                |
| :----- | :----------------------------------------------------------- | :------------------ |
| &&     | 称为逻辑与运算符。当且仅当两个操作数都为真，条件才为真。     | （A && B）为假。    |
| \| \|  | 称为逻辑或操作符。如果任何两个操作数任何一个为真，条件为真。 | （A \| \| B）为真。 |
| ！     | 称为逻辑非运算符。用来反转操作数的逻辑状态。如果条件为true，则逻辑非运算符将得到false。 | ！（A && B）为真。  |

## 赋值运算符

| 操作符  | 描述                                                         | 例子                            |
| :------ | :----------------------------------------------------------- | :------------------------------ |
| =       | 简单的赋值运算符，将右操作数的值赋给左侧操作数               | C = A + B将把A + B得到的值赋给C |
| + =     | 加和赋值操作符，它把左操作数和右操作数相加赋值给左操作数     | C + = A等价于C = C + A          |
| - =     | 减和赋值操作符，它把左操作数和右操作数相减赋值给左操作数     | C - = A等价于C = C -  A         |
| * =     | 乘和赋值操作符，它把左操作数和右操作数相乘赋值给左操作数     | C * = A等价于C = C * A          |
| / =     | 除和赋值操作符，它把左操作数和右操作数相除赋值给左操作数     | C / = A等价于C = C / A          |
| （％）= | 取模和赋值操作符，它把左操作数和右操作数取模后赋值给左操作数 | C％= A等价于C = C％A            |
| << =    | 左移位赋值运算符                                             | C << = 2等价于C = C << 2        |
| >> =    | 右移位赋值运算符                                             | C >> = 2等价于C = C >> 2        |
| ＆=     | 按位与赋值运算符                                             | C＆= 2等价于C = C＆2            |
| ^ =     | 按位异或赋值操作符                                           | C ^ = 2等价于C = C ^ 2          |
| \| =    | 按位或赋值操作符                                             | C \| = 2等价于C = C \| 2        |

## 其他运算符

### 条件运算符(?:)

+ 条件运算符也被称为三元运算符或三目运算符
+ 该运算符有3个操作数，并且需要判断布尔表达式的值
+ 该运算符主要是决定哪个值应该赋值给变量
+ 经常用于取代某个类型的if-then-else语句

#### 定义

```java
variable x = (expression) ? <statement1> : <statement2>
```

+ expression 是一个布尔表达式，当expression为真时，执行 statement1， 否则就执行 statement2
+ 此三元运算符要求返回一个结果，因此要实现简单的二分支程序，即可使用该条件运算符。

#### 实例

```java
int x,y,z;
x = 6,y = 2;
z = x>y ? x-y : x+y;
```

在这里要计算 z 的值，首先要判断 x>y 表达的值，如果为 true，z 的值为 x-y；否则 z 的值为 x+y。很明显 x>y 表达式结果为 true，所以 z 的值为 4。

#### 技巧

可以将条件运算符理解为 if-else 语句的简化形式，在使用较为简单的表达式时，使用该运算符能够简化程序代码，使程序更加易读。

#### 注意：优先级问题

```java
x>y ? x-=y : x+=y;
```

在编译时会出现语法错误，因为条件运算符优先于赋值运算符，上面的语句实际等价于：

```java
(x>y ? x-=y : x)+=y;
```

而运算符“+=”是赋值运算符，该运算符要求左操作数应该是一个变量，因此出现错误。

为了避免这类错误，可以使用括号“()”来加以区分。

例如，下面是正确的表达式。

```java
(x>y) ? (x-=y): (x+=y);
```

### instanceof运算符

该运算符用于操作对象实例，检查该对象是否是一个特定类型（类类型或接口类型）。

#### 定义

```java
( Object reference variable ) instanceof  (class/interface type)
```

如果运算符左侧变量所指的对象，是操作符右侧类或接口(class/interface)的一个对象，那么结果为真。

#### 实例

```java
String name = 'James';
boolean result = name instanceof String; // 由于name是String类型，所以返回真
```

#### 注意

##### variable必须是引用类型，不能是基本类型

```java
int i = 0;
System.out.println(i instanceof Integer);//编译不通过
System.out.println(i instanceof Object);//编译不通过
```

##### variable为null类型时

一般我们知道Java分为两种数据类型，一种是基本数据类型，有八个分别是 byte short int long float double char boolean,一种是引用类型，包括类，接口，数组等等。

而Java中还有一种特殊的 null 类型，该类型没有名字，所以不可能声明为 null 类型的变量或者转换为 null 类型，null 引用是 null 类型表达式唯一可能的值，null 引用也可以转换为任意引用类型。

我们不需要对 null 类型有多深刻的了解，我们只需要知道 null 是可以成为任意引用类型的**特殊符号**。

```java
ystem.out.println(null instanceof Object);//false
```

##### 当variable为class接口的实现类

了解Java 集合的，我们知道集合中有个上层接口 List，其有个典型实现类 ArrayList

```java
public class ArrayList<E> extends AbstractList<E>    implements List<E>, RandomAccess, Cloneable, java.io.Serializable
```

所以我们可以用 instanceof 运算符判断 某个对象是否是 List 接口的实现类，如果是返回 true，否则返回 false

```java
ArrayList arrayList = new ArrayList();
System.out.println(arrayList instanceof List); //true
```

或者反过来也是返回 true

```java
List list = new ArrayList();
System.out.println(list instanceof ArrayList); //true
```

##### 当variable为class类的直接或间接子类

我们新建一个父类 Person.class，然后在创建它的一个子类 Man.class

```java
public class Person {}
```

Man.class

```java
public class Man extends Person{}
```

测试：

```java
Person p1 = new Person();
Person p2 = new Man();
Man m1 = new Man();
System.out.println(p1 instanceof Man); //false
System.out.println(p2 instanceof Man); //true
System.out.println(m1 instanceof Man); //true
System.out.println(m1 instanceof Person); //true
```

注意第一种情况， p1 instanceof Man ，Man 是 Person 的子类，Person 不是 Man 的子类，所以返回结果为 false。

## Java运算符优先级

| 类别     | 操作符                                     | 关联性       |
| :------- | :----------------------------------------- | :----------- |
| 后缀     | () [] . (点操作符)                         | 左到右       |
| 一元     | + + - ！〜                                 | **从右到左** |
| 乘性     | * / ％                                     | 左到右       |
| 加性     | + -                                        | 左到右       |
| 移位     | >> >>>  <<                                 | 左到右       |
| 关系     | >> = << =                                  | 左到右       |
| 相等     | == !=                                      | 左到右       |
| 按位与   | ＆                                         | 左到右       |
| 按位异或 | ^                                          | 左到右       |
| 按位或   | \|                                         | 左到右       |
| 逻辑与   | &&                                         | 左到右       |
| 逻辑或   | \| \|                                      | 左到右       |
| 条件     | ？：                                       | **从右到左** |
| 赋值     | = + = - = * = / =％= >> = << =＆= ^ = \| = | **从右到左** |
| 逗号     | ，                                         | 左到右       |