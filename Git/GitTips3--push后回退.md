# GitTips3--push后回退

+ 假设退回上一个版本

1. 版本库回退

   ```bash
   $ git reset --soft 19462f6f46cf4cbc211d366359afac0c17a7c190
   // 注意 --hard 参数会抛弃当前工作区的修改
   // 使用 --soft 参数的话会回退到之前的版本，但是保留当前工作区的修改，可以重新提交
   ```

2. 提交回退

   ```bash
   $ git push origin master --force
   ```

   + 本地版本落后于远端版本，为了覆盖掉远端的版本信息，使远端仓库也退回到相应版本，必须加参数--force

   + 这样就回退成功了，但是有人会发现，另一个同样的工程pull拉取最新代码的时候，不能拉取最新代码。这是因为有问题的工程的版本和未回退前的版本是一样的，现在回退了也就是版本降低了，pull是不可能从高版本降到低版本的。如果是这样，可以用 git branch -D step5/test 来删除本地分支，或是删除文件夹，重新下载。

     当然要解决这个问题，还可以用 git revert的作用通过反做创建一个新的版本，这个版本的内容与我们要回退到的目标版本一样，但是HEAD指针是指向这个新生成的版本，而不是目标版本，这样可以保留要回退的版本，如果有其它人 pull 工程就不会取不到最新代码了。

     具体参考：https://blog.csdn.net/weixin_38883338/article/details/96478749

   