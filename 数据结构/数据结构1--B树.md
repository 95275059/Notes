# 数据结构1--B树B+树

## B树

### 定义

一颗m阶B树，或为空树，或为满足下列特征的m叉树

* 树中每个结点最多含有m棵子树

* 若根结点不是叶子结点，则至少有2个子树

* 除根结点之外的所有非终端结点至少有⌈m/2⌉棵子树

* 如果一个节点有n-1个关键字，则该结点有n个分支，且这n-1个关键字按照递增顺序排列

* 每个非终端结点中包含信息：（N, A0, K1, A1, K2, A2, ..., KN, ...）其中：

  * Ki（1<=i<=n）为关键字，且关键字按升序排序

  * 指针Ai（1<=i<=n）指向子树的根结点，Ai-1指向子树中所有节点的关键字均小于Ki，且大于Ki-1

  * 关键字的个数n必须满足：⌈m/2⌉-1<=n<=m-1

  * 节点结构如下

    | n    | K1   | K2   | ...  | Kn   |
    | ---- | ---- | ---- | ---- | ---- |
    | A0   | A1   | A2   | ...  | An   |

* 所有的叶子节点都在同一层，子叶子结点不包含任何信息。叶子节点处于同一层，可以用空指针表示，是查找失败到达的位置

![B树示例](E:\Notes\数据结构\B树示例.png)

注意：平衡m叉查找树是指每个关键字的左侧子树与右侧子树的高度差的绝对值不超过1的查找树，其节点结构与B树节点结构相同。由此可见，B树是平衡m叉查找树，但限制更强，要求所有叶结点都在同一层。

## B+树

### 定义

一个m阶的B+树具有如下几个特征：

* 有k个子树的中间节点包含有k个元素（B树中是k-1个元素），每个元素不保存数据，只用来索引，所有数据都保存在叶子节点。
* 所有的叶子结点中包含了全部元素的信息，及指向含这些元素记录的指针，且叶子结点本身依关键字的大小自小而大顺序链接。
* 所有的中间节点元素都同时存在于子节点，在子节点元素中是最大（或最小）元素。
* 所有的非终端结点可以看成是索引部分，结点中仅含其子树中的大（或小）关键字。
* B+树中，数据对象的插入和删除仅在叶节点上进行。
* B+树有2个头指针，一个是树的根节点，一个是小关键码的叶节点。

![B树示例](E:\Notes\数据结构\B+树示例.png)

## B+树和B树的区别

+ 在B+树中，具有n个关键字的结点只含有n棵子树，即每个关键字对应一颗子树；而在B树中，具有n个关键字的结点含有(n+1)棵子树。
+ 在B+树中，每个结点(非根内部结点)关键字个数n的范围是[m/2]<=n<=m(根结点1<=n<=m)；在B树中，每个结点(非根内部结点)关键字个数n的范围是[m/2]-1<=n<=m-1(根结点:1<=n<=m-1)。
+ 在B+树中，叶结点包含信息，所有非叶结点仅起到索引的作用，非叶结点中的每个索引项只含有对应子树的最大关键字和指向该子树的指针，不含有该关键字对应的存储地址。
+ 在B+树中，叶结点包含了全部关键字，即在非叶结点中出现的关键字也会出现在叶结点中；而在B树中，叶结点包含的关键字和其他结点包含的关键字是不重复的。
+ 在B+树中，有一个指针指向关键字最小的叶子结点，所有叶子结点连接成一个单链表。